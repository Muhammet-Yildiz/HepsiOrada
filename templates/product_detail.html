{% extends "base.html" %} {% load static %} {% block script %}
<script src="{% static 'js/carta.js'  %}"></script>

<script src="/static/js/detail.js"></script>

<script src="/static/js/comment.js"></script>



<script src="https://unpkg.com/js-image-zoom@0.7.0/js-image-zoom.js" type="application/javascript"></script>

<script>
    var options = {
        width: 400,
        height: 560,
        offset: {
            vertical: 0,
            horizontal: 53,
        },

        zoomStyle: 'border:1px solid black  ; width: 520px ;height :610px ; z-index:1520 ;background-color:white '
    };
    new ImageZoom(document.querySelector(".product-img  "), options);
</script>
{% endblock script %} {% block css %}

<link rel="stylesheet" href="/static/css/detail.css">
<link rel="stylesheet" href="/static/css/comment.css"> {% endblock css %} {% block title %} Ürün Detay Sayfası {% endblock title %} {% block content %} {% include "includes/addproductalert.html" %}

<div class="alert-heart-ok">
    <i class="fas fa-heart text-danger"></i>
    <span>   Ürün favorilerinize eklendi </span>
</div>



<div class="alert-heart-delete">
    <i class="fas fa-heart"></i>

    <span>Ürün favorilerinizden çıkartıldı </span>

</div>


<br> {% for data in product %}

<div class="path_top">

    <a href="/">Anasayfa</a> <span><i class="fas fa-chevron-right"></i></span>
    <a href="/category-product-list/{{data.category.slug}}">{{data.category}}</a><span><i class="fas fa-chevron-right"></i></span>
    <a href="">{{data.generalTitle}}</a> <span><i class="fas fa-chevron-right"></i></span>
    <a href="/brand-product-list/{{data.brand.slug}}">{{data.brand}}</a>
</div>
<br><br>



<div class="Product_general_emp">



    <div class="Product_image_wrap">
        <div class="extra">
            <img class="firstimage" src="{{data.image.url}}"> {% for product in data.productimage_set.all %}
            <div class="alternatif_pict">
                <img src="{{product.image.url}}" alt="{{product.title}}">
            </div>
            {% endfor %}

        </div>
        <div class="product-img  ">

            <img src="{{data.image.url}}" alt="{{data.image}}">

        </div>


    </div>





    <div class="Product_general_info">

        <div class="box1">

            <div class="sec1">

                <div class="piece1">
                    <h4>
                        {{data.title|title}}
                    </h4>
                </div>
                <div class="piece2">


                    {% if comments|length == 0 %}
                    <div class="noneCommentInfo">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0 0 172 172" style=" fill:#000000"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#666666"><path d="M86.03499,17.91667c-2.04938,-0.0128 -3.92773,1.14081 -4.8431,2.97445l-18.46257,36.92513l-43.83984,6.74674c-2.00099,0.3092 -3.6585,1.71652 -4.28813,3.64087c-0.62963,1.92435 -0.12455,4.03925 1.30668,5.47143l30.32536,30.32536l-6.75374,43.88883c-0.3081,2.00231 0.53568,4.00778 2.18261,5.18754c1.64692,1.17975 3.81724,1.3334 5.61394,0.39742l38.7238,-20.20524l38.7238,20.20524c1.7967,0.93597 3.96702,0.78233 5.61394,-0.39742c1.64692,-1.17975 2.49071,-3.18523 2.18261,-5.18754l-6.75374,-43.88883l30.32536,-30.32536c1.43123,-1.43218 1.93631,-3.54708 1.30668,-5.47143c-0.62963,-1.92435 -2.28714,-3.33168 -4.28813,-3.64087l-43.83984,-6.74674l-18.46257,-36.92513c-0.90411,-1.81108 -2.74895,-2.96073 -4.77311,-2.97445zM86,35.30843l14.90023,29.80046c0.77886,1.56005 2.26601,2.64541 3.98926,2.91146l36.09928,5.55697l-24.7474,24.7474c-1.21093,1.211 -1.77238,2.92653 -1.51172,4.61914l5.54997,36.08528l-31.79509,-16.58691c-1.55696,-0.8115 -3.41211,-0.8115 -4.96907,0l-31.79509,16.58691l5.54997,-36.08528c0.26066,-1.69261 -0.30079,-3.40814 -1.51172,-4.61914l-24.7474,-24.7474l36.09929,-5.55697c1.72325,-0.26605 3.2104,-1.35141 3.98926,-2.91146z"></path></g></g></svg>
                        <h6>
                            <a class="seeCommentlink">

                                İlk sen Degerlendir
                            </a>
                        </h6>
                    </div>

                    {% else %}


                    <div class="top-ratings">
                        <h6 class="averageStarr">{{averageStar|floatformat:1}}</h6>
                        <div class="top_star_averages">
                            <i class="fas fa-star "></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <a class="seeCommentlink">
                        {{comments|length}} degerlendirme
                    </a> {% endif %}



                </div>

                <div class="piece3">
                    <span>{{data.oldprice}} TL</span>
                    <b> {{data.price}} TL</b>
                </div>

            </div>

            <div class="sec2">

                <div class="cargo">

                    <span>KARGO BEDAVA</span>

                </div>
                <div class="discount_pay">
                    <span> %{{data.discountRate|floatformat:0}} <br> indirim </span>
                </div>
            </div>
        </div>





        <div class="box2">

            <div class="part1">

                <div class="seller">
                    <b>Satıcı :  </b>
                    <a href="/brand-product-list/{{data.brand.slug}}">{{data.brand|title}}</a>
                </div>
                <a href="/brand-product-list/{{data.brand.slug}}" class="seeshop">Magazıyı Gör > </a>


            </div>


            {% if data.size.all %}

            <div class="part2">
                <b>Size  :
                    
                    <span class="choseSize">{{data.size.first}} </span>
                
                </b>


                <div class="size_opts">

                    {% for size in data.size.all %}

                    <label class="sizelabel">{{size}}</label> {% endfor %}
                </div>

            </div>


            {% endif %} {% if data.color.all %}
            <div class="part3">
                <b>Renk</b>
                <div class="color_opts">
                    <div id="colors">
                        {% for color in data.color.all %} {% if color.color_code == '#ffff' %}
                        <div class="color" data-color="{{color.title}}" style="background-color: {{color.color_code}} ; border : 1px solid black ">

                            <div class="select_color">
                                <i style="color: white;" class="fas fa-check"></i>
                            </div>

                        </div>

                        {% else %}

                        <div class="color" data-color="{{color.title}}" style="background-color: {{color.color_code}}">

                            <div class="select_color">
                                <i style="color: white;" class="fas fa-check"></i>
                            </div>
                        </div>

                        {% endif %} {% endfor %}
                    </div>
                </div>

            </div>

            {% endif %}



            <div class="part4">

                <div class="btnhrt">

                    <button type="submit" data-action="add" data-product="{{data.id}}" class="sepetekleBtn  add-btn update-cart">  Sepete Ekle</button>


                    <a class="likeBtn" data-id="{{data.id}}" data-userid="{{request.user.id}}"> 
            
                        {% if request.user in data.heart.all %}
                            <i class="fas fa-heart iconheart text-orange "></i>
                        {% else %}
                        <img width="27px " src="/media/global/heart.svg" >
                        {% endif %}
                    </a>


                </div>
                <div class="fvrtgst">
                    <div>
                        <b>Tahmini Teslimat Tarihi :</b>
                        <span> 
                            
                            {{data.cargotime}} - {{data.forwardcargotime}} 
                        
                        
                        
                        </span>
                    </div>

                    <span class="totallike"> 
                        <img width="12"  src="https://img.icons8.com/ios/50/000000/like--v1.png" />
                        
                        <span>
                            {{data.heart.all.count}} 
                        </span> kişinin favorisi </span>

                </div>
            </div>


        </div>



        <div class="box3">
            <div class="title">
                <b>Ürün Bilgileri</b>
            </div>

            <div class="product_info_emp">
                <li>
                    <span>
                        ●

                    </span>
                    <div>

                        30 gün içinde ücretsiz iade edebilirsiniz .

                    </div>
                </li>
                <li>
                    <span>
                        ●

                    </span>
                    <div>
                        Bu ürün <a href="/brand-product-list/{{data.brand.slug}}"> {{data.brand|title}}</a> tarafından gönderilecektir.

                    </div>
                </li>

                <li>
                    <span>
                        ●
                    </span>
                    <div>
                        {{data.detail}}
                    </div>
                </li>

                <li>
                    <span>
                        ●
                    </span>
                    <div>
                        {{data.specs}}
                    </div>
                </li>
                <li>


                    <span>
                        ●

                    </span>
                    <div>
                        Kampanya fiyatından satılmak üzere 50 adetten fazla stok sunulmuştur.

                    </div>
                </li>
                <li>
                    <span>
                        ●

                    </span>
                    <div>
                        İncelemiş olduğunuz ürünün satış fiyatını satıcı belirlemektedir.

                    </div>
                </li>
                <li>
                    <span>
                        ●

                    </span>
                    <div>
                        Bir ürün birden fazla satıcı tarafından satılabilir. Ürün liste ve detay sayfalarında tüketici memnuniyeti göz önüne alınarak fiyat avantajı, teslimat hızı, iade oranları ve genel hizmet kalitesine göre belirlenmiş puanı en yüksek satıcı görünür satıcı
                        olur. Diğer satıcılar, ürün detay sayfasında alternatif olarak listelenirler.
                    </div>

                </li>
            </div>

        </div>
    </div>



</div>




<br><br><br><br>
<br><br><br><br>
<h4 style="font-family: 'Mukta', sans-serif;">Sizin için önerilerimiz </h4>
<hr>
<div class="suggest">
    <div class="products-emp">
        {% if suggest %} {% for product in suggest %}


        <a href="{% url 'product_detail' product.slug %}" class="Product" data-productid="{{product.id}}">

            <div class="product-image">
                <img width="50" src="{{product.image.url}}" alt="{{product.image}}">
            </div>
            <div class="product-info">

                <div class="p-title">

                    {{product.title}}

                </div>

                <div class="product-price">
                    <div class="oldprice">
                        {{product.oldprice}} <small>TL</small>

                    </div>
                    <div class="price">
                        <span> %{{product.discountRate|floatformat:0 }} indirim </span>
                        <span class="total">
                            {{product.price}} <small>TL</small>
                        </span>

                    </div>
                </div>
            </div>



        </a>


        {% endfor %} {% endif %}
    </div>







</div>


{% endfor %} {% if all_reviews %}


<h4 style="font-family: 'Mukta', sans-serif;">En Son Gezdiğiniz Ürünler</h4>
<hr>

<div class="lastview-Emp">
    <div class="arrow-prev2">

        <span>
            <i class="fas fa-chevron-left"></i>
        </span>

    </div>

    <div class="slicky-slider2">
        {% if all_reviews %} {% for ürün in all_reviews %}

        <div class="product-item3">
            <div class="product-img">
                <a href="/product/{{ürün.product.slug}}">

                    <img src="{{ürün.product.image.url}}" alt="{{product.image}} ">
                </a>

            </div>
            <div class="product-title">
                <a href="/product/{{ürün.product.slug}}"> 
        
                
                {{ürün.product.title}}

                    
                </a>

            </div>

            <div class="product-price-emp">

                <h6>
                    {{ürün.product.oldprice}}TL
                </h6>
                <h5>
                    <span>
                        {{ürün.product.price}}<small> TL</small>

                    </span>
                </h5>


            </div>


        </div>

        {% endfor %} {% endif %}

    </div>
    <div class="arrow-next2">
        <span>
        <i class="fas fa-chevron-right"></i>

        </span>
    </div>
</div>
{% endif %}

<br>
<div class="Comment_topInfo">

    {% for data in product %}
    <div class="mkt-title">
        <b>
        <div>
            {{data.title|title}}
            Değerlendirmeleri

        </div>
        </b> {% if comments|length != 0 %}


        <b>
            Tüm degerlendirmeler ({{comments|length}})
        </b> {% endif %}

    </div>

    <div class="mkt-cmtInfo">
        <div class="cmt-productImage">
            <img width="120" src="{{data.image.url}}" alt="{{data.title}}">
        </div>


        {% if comments|length == 0 %}

        <div class="noneEvualete">

            <h3>
                Henüz değerlendirme yok
            </h3>
            <p>
                Siz de değerlendirmenizle milyonlarca Hepsiorada müşterisinin karar vermesine yardımcı olmaya ne dersiniz?
            </p>

        </div>

        {% else %}

        <div class="cmt-Star">

            <h1 class="averageStar">{{averageStar|floatformat:1}}</h1>
            <div class="top_star_average">
                <i class="fas fa-star "></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
            </div>

        </div>



        <div class="RateBox_wrap">
        </div>


        {% endif %}





    </div>

    <div class="mkt_buttons">

        <button data-id="{{data.id}}" class="evaluateBtn">
            <i class="far fa-comments"></i> 
            <span>
                Degerlendir
            </span>
        </button>

        <button type="submit" data-action="add" data-product="{{data.id}}" class="sepetekleBtn  add-btn update-cart">  Sepete Ekle</button>

    </div>

    {% if request.user.is_authenticated %}

    <div class="mkt_infoOrder">
        <i class="fas fa-info-circle"></i>
        <span>
            Değerlendirme yapabilmek için bu ürünü satın almış olmalısınız. 
        </span>
    </div>
    {% else %}
    <div class="mkt_infoOrder">
        <i class="fas fa-info-circle"></i>
        <span>
            Değerlendirme yapabilmek için bu ürünü satın almış olmalısınız  ve Giriş yapmalısınız . 
        </span>
    </div>
    {% endif %} {% endfor %}
</div>



<div class="right_sidebar">

    <div class="close_side">
        <img src="https://img.icons8.com/windows/32/000000/multiply.png" />
    </div>

    <div class="side_wrapper">

        <div class="getcommentalert">
            <img src="https://img.icons8.com/cotton/64/000000/checked--v3.png" />
            <br>
            <h2>
                Değerlendirmenizi aldık
            </h2>
        </div>

        <div class="productİnfo_emp">
            {% for data in product %}

            <div class="mex-ProducImg">
                <img src=" {{data.image.url}}" alt=" {{item.product.title}}">
            </div>

            <div class="mex-ProductSec2">
                <b class="com_title">
                    {{data.title}}
                </b>
                <div class="mex-evaluate">
                    <span>
                        <i class="fas fa-star"></i>
                        <span>{{averageStar|floatformat:1}}</span>
                    </span>
                    <div>
                        <b>
                           -    {{comments|length}}
                        </b>
                        <span>
                            Degerlendirme

                        </span>
                    </div>

                </div>
                <div class="mex-size-color">

                    <div>
                        <span>
                            Beden

                        </span>
                        <b class="side_chooseSize">
                        </b>
                        <label>
                            ●
                        </label>
                    </div>


                    <div>

                        <span>
                            Renk
                        </span>
                        <b class="side_chooseColor">
                       
                        </b>
                    </div>

                </div>


            </div>

            {% endfor %}
        </div>



        {% for data in product %}

        <div class="comment_field" action="/addComment/">

            {% csrf_token %}
            <span>Ürünü Degerlendirin</span><br>
            <div class="Ratings_star">
                <i class="fas fa-star" data-rate="1"></i>
                <i class="fas fa-star" data-rate="2"></i>
                <i class="fas fa-star" data-rate="3"></i>
                <i class="fas fa-star" data-rate="4"></i>
                <i class="fas fa-star" data-rate="5"></i>
                <br>
            </div>
            <span>Ürün hakkındaki düşünceleriniz</span>
            <textarea name="comment_content" id="comment_content"></textarea>

            <small>
                Yorumlarınız 
                <a href="#">
                    Aydınlatma Metni’nde
                </a>
                belirtilen kapsamda işlenmektedir.
            </small>
            <button type="button" class="commentBtn" data-productid="{{data.id}}">Yorum Yap </button>
        </div>

        {% endfor %}



    </div>

</div>



<div class="alert_dngrcmt">
    <div>
        <img src="https://img.icons8.com/fluent/48/000000/high-importance.png" />
    </div>
    <div>

        <h6>
            Değerlendirme yapabilmek için bu ürünü satın almış olmalısınız.
        </h6>
        <p>
            Size daha faydalı değerlendirmeler sunabilmek için sadece ilgili ürünü satın alan müşterilerimizin deneyimlerine yer veriyoruz.
        </p>

    </div>


</div>


<br> {% if comments|length != 0 %}
<hr>

<div class="Ratings_title_number">

    Bu ürün ile ilgili {{comments|length}} değerlendirme var.

</div>
<br>



<div class="Comment_emp">
    {% for comment in comments %}
    <div class="comment_wrap">
        <div class="figureRadio">
            <div>
                {{comment.authorhead}}
                <img src="https://img.icons8.com/ios-glyphs/30/4a90e2/approval.png" />
            </div>
        </div>
        <div class="comment_w">
            <div class="sec1">
                <div class="comment_ratings">
                    <span class="AverageStar" style="display: none;">
                        {{comment.star|floatformat}}
                    </span>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <div class="comment_date">
                    {{comment.created_date|date:"j F, D"}}
                </div>
                <span>|</span>
                <div class="comment_author">
                    {{comment.author}}
                </div>

                {% if comment.order.shippingaddres_set.all %}
                <span>-</span>


                <div class="location_city">
                    {% for location in comment.order.shippingaddres_set.all %} {{location.city}} {% endfor %}
                </div>


                {% endif %}

            </div>

            <div class="sec2">
                <div class="comment_content">
                    {{comment.content}}

                </div>
                <hr>
                <div class="productSeller">

                    <label>
                        Kullanıcı bu ürünü <a href="#">{{comment.orderitem.product.brand|title}}</a> satıcısından aldı.
                    </label>
                    <span>
                        ●
                    </span>
                    <div>
                        <p>
                            Beden
                        </p>
                        <b>
                            {{comment.orderitem.chooseSize}}
                        </b>

                    </div>

                    <span>
                        ●

                    </span>
                    <div>
                        <p>
                            Renk
                        </p>
                        <b>
                            {{comment.orderitem.chooseColor|title}}
                        </b>

                    </div>
                </div>
            </div>
            <div class="sec3">

                <div class="isitusefulComment">
                    Bu değerlendirme faydalı mı ?
                </div>

                <div class="comment_rating_wrap">
                    <div class="comment_like">
                        <i data-process="like" data-id="{{comment.id }}" class="fas fa-thumbs-up"></i>
                        <span class="like_number">

                            {{comment.likes.all|length}}
                        </span>

                    </div>
                    <div class="comment_dislike">


                        <i data-process="dislike" data-id="{{comment.id }}" class="fas fa-thumbs-down"></i>
                        <span class="dislike_number">
                            {{comment.dislikes.all|length}}
                        </span>
                    </div>

                </div>


            </div>


        </div>
        <hr>





    </div>
    {% endfor %}
</div>



{% endif %} {% endblock content %}